<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Communicating with Other Hams - Q Signals</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 10px;
      text-align: center;
    }

    #question {
      font-size: 24px;
      margin-bottom: 20px;
    }

    .option-container {
      display: flex;
      flex-direction: column;
      row-gap: 10px;
      justify-content: center;
      max-width: 800px;
      margin: 0 auto;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      border: 1px solid #ccc;
      background-color: #f9f9f9;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #e0e0e0;
    }

    #feedback {
      margin: 10px;
      font-size: 24px;
    }

    #notes {
      margin 10px;
    }
  </style>
</head>

<body>
  <h1>Communicating with Other Hams - Q signals</h1>
  <div id="question"></div>
  <div id="options" class="option-container"></div>
  <div id="feedback"></div>
  <div id="notes"><a
      href="https://www.giangrandi.org/electronics/radio/qcode.shtml">source</a>

  </div>
  <div id="back"><a href="index.html">back to the tests</a></div>


  <script>
    const qcodes = {
      "QRA?": "What is the name (or call sign) of your station?",
      "QRA": "The name (or call sign) of my station is ...",
      "QRB?": "How far are you from my station?",
      "QRB": "The distance between our stations is ... nautical miles (or km).",
      "QRG?": "Will you tell me my exact frequency (or that of ...)?",
      "QRG": "Your exact frequency (or that of ... ) is ... kHz (or MHz).",
      "QRH?": "Does my frequency vary?",
      "QRH": "Your frequency varies.",
      "QRI?": "How is the tone of my transmission?",
      "QRI": "The tone of your transmission is (1: good, 2: variable 3: bad)",
      "QRK?": "What is the readability of my signals (or those of ...)?",
      "QRK": "The readability of your signals (or those of ...) is ... (1: bad .. 5: excellent).",
      "QRL?": "Are you busy?",
      "QRL": "I am busy. (or I am busy with ... ) Please do not interfere.",
      "QRM?": "Do you have interference?",
      "QRM": "I have interference.",
      "QRN?": "Are you troubled by static noise?",
      "QRN": "I am troubled by static noise.",
      "QRO?": "Shall I increase transmit power?",
      "QRO": "Please increase transmit power.",
      "QRP?": "Shall I decrease transmit power?",
      "QRP": "Please decrease transmit power.",
      "QRQ?": "Shall I send faster?",
      "QRQ": "Please send faster (... words per minute).",
      "QRS?": "Shall I send more slowly?",
      "QRS": "Please send more slowly (... words per minute).",
      "QRT?": "Shall I cease or suspend operation?",
      "QRT": "I am suspending operation.",
      "QRU?": "Have you anything for me?",
      "QRU": "I have nothing for you.",
      "QRV?": "Are you ready?",
      "QRV": "I am ready.",
      "QRX?": "Shall I standby? / When will you call me again?",
      "QRX": "Please standby. / I will call you again at ... (hours) on ... kHz (or MHz).",
      "QRZ?": "Who is calling me?",
      "QRZ": "You are being called by ... (on ... kHz (or MHz)).",
      "QSA?": "What is the strength of my signals (or those of ... )?",
      "QSA": "The strength of your signals (or those of ...) is ... (1: very weak .. 5: very strong).",
      "QSB?": "Are my signals fading?",
      "QSB": "Your signals are fading.",
      "QSD?": "Is my keying defective?",
      "QSD": "Your keying is defective.",
      "QSK?": "Can you hear me between your signals (while transmitting), and if so can I break in on your transmission?",
      "QSK": "I can hear you between my signals (while transmitting); break in on my transmission.",
      "QSL?": "Can you acknowledge receipt?",
      "QSL": "I am acknowledging receipt.",
      "QSM?": "Shall I repeat the last telegram (message) which I sent you, or some previous telegram (message)?",
      "QSM": "Repeat the last telegram (message) which you sent me (or telegram(s) (message(s)) numbers(s) ...).",
      "QSN?": "Did you hear me (or ...) on ... kHz (or MHz)?.",
      "QSN": "I did hear you (or ...) on ... kHz (or MHz).",
      "QSO?": "Can you communicate with ... direct or by relay?",
      "QSO": "I can communicate with ... direct (or by relay through ...).",
      "QSP?": "Will you relay a message to ...?",
      "QSP": "I will relay a message to ... .",
      "QSS?": "What working frequency will you use?",
      "QSS": "I will use ... kHz (or MHz).",
      "QSU?": "Shall I send or reply on this frequency (or on ... kHz (or MHz))?",
      "QSU": "Please send or reply on this frequency (or on ... kHz (or MHz)).",
      "QSV?": "Shall I send a series of \"V\" on this frequency (or on ... kHz (or MHz))?",
      "QSV": "Please send a series of \"V\" on this frequency (or on ... kHz (or MHz)).",
      "QSX?": "Will you listen to ... on ... kHz (or MHz)?",
      "QSX": "I am listening to ... on ... kHz (or MHz).",
      "QSY?": "Shall I change transmission frequency (to ... kHz (or MHz))?",
      "QSY": "Please change transmission frequency (to ... kHz (or MHz)).",
      "QSZ?": "Shall I send each word or group more than once?",
      "QSZ": "Send each word or group twice (or ... times).",
      "QTC?": "How many telegrams (messages) have you to send?",
      "QTC": "I have ... telegrams (messages) for you (or for ...).",
      "QTH?": "What is your position in latitude and longitude (or according to any other indication)?",
      "QTH": "My position is ... latitude, ... longitude.",
      "QTR?": "What is the correct time?",
      "QTR": "The correct time is ... hours.",
    };

    const keys = Object.keys(qcodes);
    let currentQuestionIndex = pickInt(1000);
    let level = 0;

    function generateQuestion() {
      const qcode = keys[currentQuestionIndex % keys.length];

      const correctAnswer = qcodes[qcode];
      let wrongAnswers = keys.
        filter(key => key != qcode && qcode.endsWith("?") == key.endsWith("?")).
        map(key => qcodes[key]);

      wrongAnswers = pickN(wrongAnswers, 3);

      document.getElementById('question').innerText = `What does ${qcode} mean`;

      const optionsDiv = document.getElementById('options');
      optionsDiv.innerHTML = '';

      const options = [correctAnswer, ...wrongAnswers];
      options.sort(() => Math.random() - 0.5);

      options.forEach(option => {
        const button = document.createElement('button');
        button.classList.add('option');
        button.innerText = option;
        button.onclick = () => checkAnswer(option === correctAnswer);
        optionsDiv.appendChild(button);
      });
    }

    function checkAnswer(isCorrect) {
      const feedbackDiv = document.getElementById('feedback');
      let next;
      if (isCorrect) {
        feedbackDiv.innerText = 'Correct!';
        currentQuestionIndex = pickInt(1000);
        setTimeout(() => {
          feedbackDiv.innerText = '';
          generateQuestion();
        }, 500);

      } else {
        feedbackDiv.innerText = 'Incorrect!';
        setTimeout(() => {
          feedbackDiv.innerText = '';
        }, 500);
      }
    }

    function pickInt(max) {
      return Math.floor(Math.random() * max);
    }

    function pick(options) {
      return options[Math.floor(Math.random() * options.length)];
    }

    function pickN(options, n) {
      res = []
      while (res.length < n && options.length > 0) {
        picked = pick(options);
        res.push(picked);
        options = options.filter(x => x != picked);
      }
      return res;
    }

    generateQuestion();
  </script>
</body>

</html>